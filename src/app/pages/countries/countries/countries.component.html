<div [style]="{ height: '100%', display: !loading ? 'block' : 'none' }">
  <div
    fxLayout="column"
    fxLayout.gt-sm="row"
    fxLayoutAlign="start"
    fxLayoutAlign.gt-sm="space-between center"
    fxLayoutGap="8px"
  >
    <!-- Search -->
    <mat-form-field fxFlex fxFlex.gt-sm="0 1 75%">
      <mat-label>Filter</mat-label>
      <input #filter matInput placeholder="Ex.: Brazil" />
      <mat-icon class="icon" matSuffix> search </mat-icon>
    </mat-form-field>
    <mat-form-field fxFlex fxFlex.gt-sm="0 1 25%">
      <mat-label>Filter by region</mat-label>
      <mat-select
        (selectionChange)="filterByRegion()"
        [formControl]="regionCtrl"
        multiple
      >
        <mat-select-trigger>
          {{ regionCtrl.value ? regionCtrl.value[0] : "" }}
          <span *ngIf="regionCtrl.value?.length > 1">
            (+{{ regionCtrl.value.length - 1 }}
            {{ regionCtrl.value?.length === 2 ? "other" : "others" }})
          </span>
        </mat-select-trigger>
        <mat-option *ngFor="let region of regions" [value]="region">{{
          region
        }}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <mat-table #table class="mat-elevation-z8" [dataSource]="dataSource" matSort>
    <!-- Flag Column -->
    <ng-container matColumnDef="flag">
      <mat-header-cell *matHeaderCellDef> </mat-header-cell>
      <mat-cell *matCellDef="let row">
        <img
          [routerLink]="'/countries/' + row?.name"
          [src]="row?.flag"
          alt="Flag"
          width="25px"
        />
      </mat-cell>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        Name
      </mat-header-cell>
      <mat-cell *matCellDef="let row">
        {{ row?.name }}
      </mat-cell>
    </ng-container>

    <!-- Capital Column -->
    <ng-container matColumnDef="capital">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        Capital
      </mat-header-cell>
      <mat-cell *matCellDef="let row">
        {{ row?.capital }}
      </mat-cell>
    </ng-container>

    <!-- Region Column -->
    <ng-container matColumnDef="region">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        Region
      </mat-header-cell>
      <mat-cell *matCellDef="let row">
        {{ row?.region }}
      </mat-cell>
    </ng-container>

    <!-- Languages Column -->
    <ng-container matColumnDef="languages">
      <mat-header-cell *matHeaderCellDef> Languages </mat-header-cell>
      <mat-cell *matCellDef="let row">
        {{ row?.languages | join: "iso639_2" }}
      </mat-cell>
    </ng-container>

    <!-- Currencies Column -->
    <ng-container matColumnDef="currencies">
      <mat-header-cell *matHeaderCellDef> Currencies </mat-header-cell>
      <mat-cell *matCellDef="let row">
        {{ row?.currencies | join: "code" }}
      </mat-cell>
    </ng-container>

    <!-- Population Column -->
    <ng-container matColumnDef="population">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        Population
      </mat-header-cell>
      <mat-cell *matCellDef="let row">
        {{ row?.population }}
      </mat-cell>
    </ng-container>

    <mat-header-row
      *matHeaderRowDef="displayedColumns; sticky: true"
    ></mat-header-row>
    <mat-row
      *matRowDef="let row; columns: displayedColumns"
      matRipple
    ></mat-row>

    <!-- <mat-row *matNoDataRow>
      <mat-cell>Nenhum pa√≠s encontrado.</mat-cell>
    </mat-row> -->
  </mat-table>
  <!-- <div *ngIf="dataSource.filteredData?.length === 0">Nada encontrado.</div> -->

  <mat-paginator
    #paginator
    [length]="dataSource.filteredData?.length"
    [pageIndex]="0"
    [pageSize]="5"
    [pageSizeOptions]="[5, 10, 20]"
    showFirstLastButtons
  ></mat-paginator>
</div>
